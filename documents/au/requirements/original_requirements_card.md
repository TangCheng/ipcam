# 本文档仅用于记录和描述基础型网络摄像机原始需求。

***
# 样例
## ~~需求编号：1~~
## ~~需求标题：视频采集~~
## ~~优先级：高~~
### ~~描述：~~
~~采集视频~~
### ~~来源：同类产品~~
### ~~验收标准：~~
### ~~依赖关系：无~~
***

***
## 需求编号：1
## 需求标题：视频采集
## 优先级：高
### 描述：
通过视频输入接口采集外部sensor或者一体机的视频信号，并且同时编码为3路不同分辨率的H.264数字视频。  
3路分辨率分别为：

+ 720P@30fps
+ VGA@30fps
+ QVGA@30fps

软件架构上需要自动检测和无缝的支持硬件能够支持到的各种sensor，目前已知需要支持的sensor有：

+ Novatek NT99141
+ Micron AR0130
+ Sony IMX138

### 来源：同类产品
### 验收标准：3路数字视频保存为文件可以清晰无误的通过通用播放器播放，图像还原真实噪点小。
### 依赖关系：无
***

***
## ~~需求编号：2~~
## ~~需求标题：音频采集~~
## ~~优先级：低~~
### ~~描述：~~
~~通过音频输入接口采集外部的音频信号，并且可以编码为3种数字音频格式。 ~~ 
~~3种数字音频格式分别为~~

+ ~~G.711~~
+ ~~ADPCM~~
+ ~~G.726~~

### ~~来源：同类产品~~
### ~~验收标准：3种数字音频存储为文件后，可通过标准播放器正确播放。~~
### ~~依赖关系：无~~
***

***
## 需求编号：3
## 需求标题：音视频传输
## 优先级：高
### 描述：
编码后的数字音视频，可以通过网络接口进行传输，传输过程应保证实时性和同步性，应支持以下几种传输方式：

+ 单播（unicast）
+ 多播/组播（multicast）

传输协议应支持以下几种标准：

+ RTSP/RTP [[RFC2326](http：//www.rfc-editor.org/rfc/rfc2326.txt)/[RFC3550](http：//www.rfc-editor.org/rfc/rfc3550.txt)]
    + RTP Over RTSP(Tcp)
    + tunneling RTSP and RTP over Http [[Rtsp over http - Apple Inc.](http：//www.opensource.apple.com/source/QuickTimeStreamingServer/QuickTimeStreamingServer-412.42/Documentation/RTSP_Over_HTTP.pdf)]
+ RTCP [[RFC3550](http：//www.rfc-editor.org/rfc/rfc3550.txt)]

### 来源：同类产品
### 验收标准：已知符合上述标准协议的通用播放器，应能直接连接网络摄像机并正确播放音视频。
### 依赖关系：无
***

***
## 需求编号：4
## 需求标题：浏览器访问
## 优先级：高
### 描述：
网络摄像机应通过浏览器可访问。通过浏览器可以预览实时画面，配置运行参数、升级软件版本及重启设备。  
支持的浏览器和操作系统平台有：

+ IE7以上（Windows）
+ Chrome/Chromium (Windows/Linux/MacOSX)
+ Firefox (Windows/Linux/MacOSX)
+ Safari (Windows/MacOSX)
+ 其它支持Html5 Video标签的浏览器及其相应的操作系统

Web页面需要支持的语言有：

+ 简体中文
+ English

### 来源：产品创新点
### 验收标准：通过以上描述的浏览器在不同操作系统下可正常访问操作。
### 依赖关系：原始需求 9
***

***
## 需求编号：5
## 需求标题：OnVif协议
## 优先级：高
### 描述：
网络摄像机应支持[OnVif](http：//www.onvif.org)协议。可通过OnVif协议发现、控制和配置网络摄像机。
### 来源：同类产品
### 验收标准：通过已知符合OnVif协议的客户端能够正确的对接网络摄像机。
### 依赖关系：无
***

***
## 需求编号：6
## 需求标题：GB/T 28181-2011协议
## 优先级：中
### 描述：
网络摄像机应支持[GB/T 28181-2011](http：//about：blank)协议。可通过GB/T 28181-2011协议发现、控制和配置网络摄像机。
### 来源：同类产品
### 验收标准：通过已知符合GB/T 28181-2011协议的客户端能够正确的对接网络摄像机。
### 依赖关系：无
***

***
## ~~需求编号：7~~
## ~~需求标题：I/O报警输入输出~~
## ~~优先级：低~~
### ~~描述：~~
~~摄像机支持一路I/O报警信号输入和一路I/O报警输出。~~
### ~~来源：同类产品~~
### ~~验收标准：通过报警输入信号能够联动正确的处理流程。正确的产生报警输出信号并驱动外部设备。~~
### ~~依赖关系：无~~
***

***
## 需求编号：8
## 需求标题：可配置参数列表
## 优先级：高
### 描述：
网络摄像机的下列参数应该可配置，尽量避免需要重启才能使参数改变生效：

+ 设备信息
	+ 设备名称
	+ 备注信息
+ OSD显示设置
	+ 各项是否显示
	+ 各项的字体大小
	+ 各项的左上角点坐标（以像素为单位）
	+ 各项的颜色
+ 视频设置
	+ 视频编码级别（Baseline/Main profile）
	+ 视频垂直和左右翻转
	+ 视频质量（高、中、低）
	+ 视频帧率（1 ~ 30fps）
	+ 视频码率（CBR、VBR）
+ 场景设置
	+ 50Hz
	+ 60Hz
	+ 混合模式
+ 网络地址和端口
    + DHCP
    + 静态地址
    + PPPoE
    + Http端口
    + Rtsp端口
    + Rtp端口
    + OnVif端口
+ 时间和日期
    + 指定日期时间
    + NTP自动同步
+ 用户
    + 管理员
    + 来宾

### 来源：同类产品
### 验收标准：以上参数能够方便友好的被用户配置。
### 依赖关系：无
***

***
## 需求编号：9
## 需求标题：软件升级
## 优先级：高
### 描述：
通过两种方式升级网络摄像机内部固件：

+ 浏览器上传方式
+ 服务器下载方式

需要保证错误的文件不会被写入到设备中。

### 来源：同类产品
### 验收标准：软件升级保证将升级版本的软件正确写入设备Flash中。
### 依赖关系：无
***

***
## 需求编号：10
## 需求标题：运行日志
## 优先级：中
### 描述：
网络摄像机可保存和查看以下类型的日志：

+ 用户登录/登出
+ 参数修改
+ 设备重启
+ 报警信号

### 来源：同类产品
### 验收标准：以上日志正确记录和查询。
### 依赖关系：无
***

***
## 需求编号：11
## 需求标题：调试日志
## 优先级：低
### 描述：
通过特殊指令打开或者关闭调试模式，系统进入问题追踪模式，此模式下可通过ssh或者telnet登录网络摄像机，并且各个模块程序中预埋的检测点会记录调试日志到数据库或者文件中。
### 来源：开发维护需要
### 验收标准：以上功能能够正确执行。
### 依赖关系：无
***

***
## ~~需求编号：12~~
## ~~需求标题：视频服务器注册指向~~
## ~~优先级：低~~
### ~~描述：~~
~~可以提供2个视频器注册指向。~~
### ~~来源：南车特殊需求~~
### ~~验收标准：以上功能能够正确注册。~~
### ~~依赖关系：原始需求 3~~
***

***
## 需求编号：13
## 需求标题：OSD叠加
## 优先级：高
### 描述：
在采集的原始视频图像之上，支持编码时叠加OSD信息。使用UNICODE来支持用户输入的各种语言信息。
可显示的信息项包含：

+ 视频帧率
+ 视频码率
+ 日期和时间
+ 设备名称
+ 备注信息

各项信息是否显示以及显示的位置、尺寸和颜色用户可配置。
### 来源：同类产品
### 验收标准：能清楚显示字符无乱码。
### 依赖关系：原始需求 8
***

***
## 需求编号：14
## 需求标题：不同场景适配
## 优先级：高
### 描述：
在交流50Hz、60Hz以及混合模式（有灯光和室外阳光）的不同环境下，图像不闪烁，颜色偏差小。
### 来源：同类产品
### 验收标准：无专业测试设备，分别在工频50Hz、60Hz和混合模式下测试，达到人眼观察无闪烁及无色偏。
### 依赖关系：原始需求 8
***

***
## 需求编号：15
## 需求标题：搜索工具
## 优先级：中
### 描述：
运行在PC端的工具软件，可在局域网内搜索网络摄像机设备，显示搜索到的设备列表，列表信息包含：

+ 设备序列号
+ 设备MAC地址
+ 设备名称
+ 设备备注信息
+ 设备IP地址
+ 设备掩码地址
+ 设备网关地址
+ 设备软件版本

对搜索到的网络摄像机，可跨网段实现以下操作：

+ IP地址、掩码地址和网关地址修改
+ 软件版本升级
+ 产品调试功能开启（高级版本）
+ 产品高级功能开启（高级版本）

搜索工具运行的操作系统支持：

+ Windows XP / Windows Vista / Windows 7 / Windows 8
+ Linux
+ MacOS X

### 来源：同类产品
### 验收标准：搜索结果准确无误，修改及时生效。
### 依赖关系：原始需求 9
***

***
## 需求编号：16
## 需求标题：量产和维护工具
## 优先级：中
### 描述：
运行在PC端的量产和维护工具具备两方面的功能，一方面对于刚生产完成的设备，可以写入MAC地址和设备ID，写入方式稍后描述。另一方面将此设备的ID信息与客户信息相关联并记录至客户信息数据库中。  
MAC地址和设备ID的写入方式为，设定

+ MAC地址段的起始值、结束值和步长（通常为1）
+ 设备ID的起始值、结束值和步长（通常为1）
+ 购买设备的客户信息

设定完成后与客户信息数据库比对检查，MAC地址段和设备ID段均不能存在于客户信息数据库中，检查成功进入写入模式。  
在写入模式下，从起始值开始，每检查到局域网内出现一台未写入MAC地址和设备ID的设备则写入MAC和ID，然后增加步长值，直至MAC地址段或者ID段达到结束值。写入的同时将设备信息与客户信息关联并记录至客户信息数据库中。原则上每台设备的MAC地址和ID一经写入，终身不变。
量产和维护工具运行的操作系统支持：

+ Windows XP / Windows Vista / Windows 7 / Windows 8
+ Linux
+ MacOS X


### 来源：生产和管理需求
### 验收标准：能够正确写入设备信息和跟踪信息，保证无重复写入。
### 依赖关系：原始需求 15
***

***
## 需求编号：17
## 需求标题：老化测试工具
## 优先级：低
### 描述：
运行在PC端的测试工具软件。能够同时连接64路网络摄像机录像，实时预览16路画面，记录测试过程中的各种异常状态，包含但不限于：

+ 设备离线
+ 视频丢失
+ 网络异常
+ 测试环境断电

录像和异常记录便于查询管理。

老化测试工具可以运行的操作系统支持：

+ Windows 7

### 来源：生产需求
### 验收标准：

+ 录像写入正常可回放
+ 实时预览清晰流畅
+ 异常记录准确

### 依赖关系：原始需求 1/2/3/5/6
***

***
## ~~需求编号：18~~
## ~~需求标题：SDK~~
## ~~优先级：低~~
### ~~描述：~~
~~用户可以根据SDK接入到不通的后端平台（NVR或主流监控平台）先期可以用onvif后GB28181实现，后期用专业平台接入。~~
### ~~来源：同类产品~~
### ~~验收标准：文档清楚描述简洁。~~
### ~~依赖关系：无~~
***

***
## 需求编号：19
## 需求标题：Lisence认证机制
## 优先级：低
### 描述：
允许网络摄像机软件运行在我方支持的由客户自行生产的硬件模块之上，这对网络摄像机的软件提出了一下几方面的要求：

1. 能够灵活应对硬件和外设上的变化
+ 具备相应的防破解机制和Lisence认证机制。具体机制后续讨论设计
+ 通过Lisence认证的客户，可开放一些自定义的接口
	+ 提供Web界面的开发接口。通过特殊方法允许客户升级自行开发的Web界面包

### 来源：市场特殊需求
### 验收标准：待定
### 依赖关系：无
***

***
## ~~需求编号：20~~
## ~~需求标题：SD卡存储支持~~
## ~~优先级：低~~
### ~~描述：~~
~~可以通过SD卡录像。~~
### ~~来源：同类产品~~
### ~~验收标准：待定。~~
### ~~依赖关系：无~~
***
